<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ColeÃ§Ã£o K-pop | I Purple You Creative</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-image: url('assets/imagem-fundo.jpg');
      background-size: cover;
      background-attachment: fixed;
      background-position: center;
      color: #333;
    }

    header {
      background-color: rgba(255, 255, 255, 0.9);
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    header img.logo {
      height: 60px;
    }

    nav a {
      margin: 0 1rem;
      text-decoration: none;
      color: #6a1b9a;
      font-weight: bold;
      font-size: 1rem;
    }

    .banner-kpop {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
    }

    .titulo-colecao {
      text-align: center;
      font-size: 2rem;
      margin-top: 1rem;
      color: #6a1b9a;
    }

    .produtos-kpop {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
      padding: 2rem;
    }

    .produto {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      text-align: center;
      max-width: 240px;
      transition: transform 0.3s ease;
    }

    .produto:hover {
      transform: translateY(-5px);
    }

    .produto img {
      width: 100%;
      border-radius: 10px;
    }

    .produto button {
      background-color: #6a1b9a;
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 0.5rem;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
    }

    .modal-content {
      background-color: #fff;
      margin: 5% auto;
      padding: 2rem;
      border: 1px solid #888;
      width: 90%;
      max-width: 600px;
      border-radius: 12px;
      position: relative;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 20px;
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .zoom-container {
      display: flex;
      align-items: center;
      gap: 20px;
      justify-content: center;
      margin-bottom: 1rem;
    }

    .zoom-img {
      width: 260px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 2px 10px #0003;
      cursor: zoom-in;
      transition: transform 0.3s ease;
    }

    .img-zoom-result {
      border: 2px solid #eee;
      width: 170px;
      height: 170px;
      background-repeat: no-repeat;
      background-size: 480px 480px;
      display: none;
      border-radius: 12px;
      box-shadow: 0 2px 8px #0002;
    }

    footer {
      background-color: rgba(255, 255, 255, 0.9);
      text-align: center;
      padding: 2rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<header>
  <img src="assets/logo-IPYC.png" alt="Logo IPYC" class="logo">
  <nav>
    <a href="index.html">Home</a>
    <a href="colecao-bts.html">ColeÃ§Ã£o BTS</a>
    <a href="colecao-dorameira.html">ColeÃ§Ã£o Dorameira</a>
    <a href="carrinho.html">ðŸ›’ Carrinho (<span id="contador-carrinho">0</span>)</a>
  </nav>
</header>

<img src="assets/banner-kpop.png" alt="Banner ColeÃ§Ã£o K-pop" class="banner-kpop">
<div class="titulo-colecao">ColeÃ§Ã£o K-pop</div>

<section class="produtos-kpop">
  <div class="produto">
    <img src="assets/blackpink-black.png" alt="Camiseta Blackpink">
    <h3>Camiseta Blackpink Watercolor</h3>
    <p>Estampa exclusiva Blackpink, estilo aquarela. DisponÃ­vel em preto e branco!</p>
    <div class="preco">R$ 59,90</div>
    <button onclick="abrirModal(
      'Camiseta Blackpink Watercolor',
      'REF123',
      ['Preta', 'Branca'],
      ['P', 'M', 'G', 'GG'],
      '59.90',
      ['assets/blackpink-black.png', 'assets/Blackpink-white.png']
    )">Ver Produto</button>
  </div>

  <div class="produto">
    <img src="assets/bp-skate-black.png" alt="Camiseta Stray Kids">
    <h3>Camiseta Stray Kids Style</h3>
    <p>Stray Kids para quem ama atitude e estilo! Preto ou branco.</p>
    <div class="preco">R$ 59,90</div>
    <button onclick="abrirModal(
      'Camiseta Stray Kids Style',
      'REF124',
      ['Preta', 'Branca'],
      ['P', 'M', 'G', 'GG'],
      '59.90',
      ['assets/bp-skate-black.png', 'assets/bp-skate-white.png']
    )">Ver Produto</button>
  </div>

  <div class="produto">
    <img src="assets/stray-black.png" alt="Camiseta Stray Kids Group">
    <h3>Camiseta Stray Kids Group</h3>
    <p>ClÃ¡ssico Stray Kids para os stays de verdade. Em duas cores!</p>
    <div class="preco">R$ 59,90</div>
    <button onclick="abrirModal(
      'Camiseta Stray Kids Group',
      'REF125',
      ['Preta', 'Branca'],
      ['P', 'M', 'G', 'GG'],
      '59.90',
      ['assets/stray-black.png', 'assets/stray-white.png']
    )">Ver Produto</button>
  </div>
</section>

<!-- MODAL -->
<div id="product-modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="fecharModal()">&times;</span>
    <h2 id="modal-titulo"></h2>
    <p><strong>ReferÃªncia:</strong> <span id="modal-referencia"></span></p>
    <div class="zoom-container">
      <img id="modal-imagem" class="zoom-img" src="" alt="Imagem do Produto">
      <div class="img-zoom-result" id="zoomResult"></div>
    </div>
    <p><strong>PreÃ§o:</strong> R$ <span id="modal-preco"></span></p>
    <label for="selecao-cor">Cor:</label>
    <select id="selecao-cor"></select><br><br>
    <label for="selecao-tamanho">Tamanho:</label>
    <select id="selecao-tamanho"></select><br><br>
    <button onclick="adicionarProdutoAoCarrinho()">Adicionar ao Carrinho</button>
    <p id="erro-modal" style="color:red; display:none;">Selecione a cor e o tamanho.</p>
  </div>
</div>

<footer>
  Â© 2025 I Purple You Creative â€¢ Feito com amor por dorameiras ðŸ’œ<br><br>
  <a href="https://www.instagram.com/ipurpleyoucreative/" target="_blank" style="color: #6a1b9a; text-decoration: none; font-weight: bold; font-size: 1.1rem;">
    ðŸ“¸ Siga a gente no Instagram: @ipurpleyoucreative ðŸ’œ
  </a>
</footer>

<script>
  let imagensArray = [];

  function abrirModal(titulo, referencia, cores, tamanhos, preco, imagens) {
    imagensArray = imagens;
    document.getElementById("modal-titulo").textContent = titulo;
    document.getElementById("modal-referencia").textContent = referencia;
    document.getElementById("modal-preco").textContent = preco;
    document.getElementById("modal-imagem").src = imagens[0];

    const selecaoCor = document.getElementById("selecao-cor");
    const selecaoTamanho = document.getElementById("selecao-tamanho");
    selecaoCor.innerHTML = '<option value="">Selecione</option>';
    selecaoTamanho.innerHTML = '<option value="">Selecione</option>';

    cores.forEach((cor, i) => {
      const opt = document.createElement("option");
      opt.value = cor;
      opt.textContent = cor;
      selecaoCor.appendChild(opt);
    });

    tamanhos.forEach(tam => {
      const opt = document.createElement("option");
      opt.value = tam;
      opt.textContent = tam;
      selecaoTamanho.appendChild(opt);
    });

    selecaoCor.onchange = () => {
      const idx = cores.indexOf(selecaoCor.value);
      document.getElementById("modal-imagem").src = imagensArray[idx] || imagensArray[0];
    };

    document.getElementById("erro-modal").style.display = "none";
    document.getElementById("product-modal").style.display = "block";
    imageZoom('modal-imagem', 'zoomResult');
  }

  function fecharModal() {
    document.getElementById("product-modal").style.display = "none";
  }

  function adicionarProdutoAoCarrinho() {
    const nome = document.getElementById('modal-titulo').textContent;
    const referencia = document.getElementById('modal-referencia').textContent;
    const preco = parseFloat(document.getElementById('modal-preco').textContent);
    const cor = document.getElementById('selecao-cor').value;
    const tamanho = document.getElementById('selecao-tamanho').value;
    const imagem = document.getElementById('modal-imagem').src;

    if (!cor || !tamanho) {
      document.getElementById("erro-modal").style.display = "block";
      return;
    }

    const produto = {
      nome,
      referencia,
      preco,
      cor,
      tamanho,
      imagem,
      quantidade: 1
    };

    let carrinho = JSON.parse(localStorage.getItem('carrinhoItems')) || [];
    carrinho.push(produto);
    localStorage.setItem('carrinhoItems', JSON.stringify(carrinho));
    atualizarContadorCarrinho();
    alert("Produto adicionado ao carrinho!");
    fecharModal();
  }

  function atualizarContadorCarrinho() {
    const carrinho = JSON.parse(localStorage.getItem("carrinhoItems") || "[]");
    const total = carrinho.reduce((sum, item) => sum + (item.quantidade || 1), 0);
    document.getElementById("contador-carrinho").textContent = total;
  }

  function imageZoom(imgID, resultID) {
    var img = typeof imgID === "string" ? document.getElementById(imgID) : imgID;
    var result = typeof resultID === "string" ? document.getElementById(resultID) : resultID;

    img.onmousemove = null;
    img.onmouseleave = null;
    img.onmouseenter = null;

    img.onmousemove = moveLens;
    img.onmouseleave = () => { result.style.display = 'none'; };
    img.onmouseenter = () => {
      result.style.display = 'block';
      result.style.backgroundImage = "url('" + img.src + "')";
    };

    function moveLens(e) {
      var pos = getCursorPos(e);
      var x = pos.x, y = pos.y, zoom = 2;
      result.style.backgroundPosition = `-${x * zoom - result.offsetWidth / 2}px -${y * zoom - result.offsetHeight / 2}px`;
      result.style.backgroundSize = (img.width * zoom) + "px " + (img.height * zoom) + "px";
    }

    function getCursorPos(e) {
      var a = img.getBoundingClientRect();
      var x = e.clientX - a.left;
      var y = e.clientY - a.top;
      return {x: x, y: y};
    }
  }

  atualizarContadorCarrinho();
</script>

</body>
</html>
